###############################################################################
# Managed by sonic-config-engine
###############################################################################
#
# EXAMPLE.conf:
#   An example configuration file for configuring the Net-SNMP agent ('snmpd')
#   See the 'snmpd.conf(5)' man page for details
#
#  Some entries are deliberately commented out, and will need to be explicitly activated
#
###############################################################################

###############################################################################
#
#  ACCESS CONTROL
#

                                                 #  system + hrSystem groups only
view   systemonly  included   .1.3.6.1.2.1.1
view   systemonly  included   .1.3.6.1.2.1.25.1

                                                 #  Default IPv4 access to basic system info
                                                 #  Default IPv6 access to basic system info

###############################################################################
#
#  SYSTEM INFORMATION
#

#  Note that setting these values here, results in the corresponding MIB objects being 'read-only'
#  See snmpd.conf(5) for more details
                                                 # Application + End-to-End layers
sysServices    72


#
#  Process Monitoring
#
# todo: should we enable snmp based monitoring of sswsyncd and other processes?

# At least one 'sendmail' process, but no more than 10
#proc  sendmail 10 1

#  Walk the UCD-SNMP-MIB::prTable to see the resulting output
#  Note that this table will be empty if there are no "proc" entries in the snmpd.conf file


#
#  Disk Monitoring
#
                               # 10MBs required on root disk, 5% free on /var, 10% free on all other disks
disk       /     10000
disk       /var  5%
includeAllDisks  10%

#  Walk the UCD-SNMP-MIB::dskTable to see the resulting output
#  Note that this table will be empty if there are no "disk" entries in the snmpd.conf file


#
#  System Load
#
                               # Unacceptable 1-, 5-, and 15-minute load averages
load   12 10 5

#  Walk the UCD-SNMP-MIB::laTable to see the resulting output
#  Note that this table *will* be populated, even without a "load" entry in the snmpd.conf file



###############################################################################
#
#  ACTIVE MONITORING
#
# Note: disabled snmp traps due to side effect of causing snmpd to listen on all ports (0.0.0.0)
#
#   send SNMPv1  traps
#trapsink     localhost public
#   send SNMPv2c traps
#trap2sink    localhost public
#   send SNMPv2c INFORMs
#informsink   localhost public

#  Note that you typically only want *one* of these three lines
#  Uncommenting two (or all three) will result in multiple copies of each notification.


#
#  Event MIB - automatically generate alerts
#
# Remember to activate the 'createUser' lines above
#iquerySecName   internalUser
#rouser          internalUser
# generate traps on UCD error conditions
#defaultMonitors          yes
#note, this release of snmpd does not support linkUpDownNotifications
# generate traps on linkUp/Down
#linkUpDownNotifications  yes


#
#  AgentX Sub-agents
#
                                           #  Run as an AgentX master agent
master          agentx
# internal socket to allow extension to other docker containers
# Currently the other container using this is docker-fpm-frr
# make sure this line matches bgp:/etc/snmp/frr.conf 
# please see testing procedure in the same file to verify this works
# to verify the SNMP docker side look for the following string in the log file:
# INFO snmp-subagent [ax_interface] INFO: Using agentx socket type tcp with path tcp:localhost:3161
# INFO supervisord snmp-subagent INFO:ax_interface:Using agentx socket type tcp with path tcp:localhost:3161
agentxsocket    tcp:localhost:3161

#
#  SysDescription pass-through
#
pass -p 10 .1.3.6.1.2.1.1.1 /usr/share/snmp/sysDescr_pass.py

# Begin Configuration derived from ConfigDB
###############################################################################
#
# System Group
#
sysName testnode-1
sysLocation Rack1-Row-2
sysContact support@acme.com


###############################################################################
#
# SNMP community strings
#

com2sec    private1   default   private1
com2sec6   private1   default   private1
group       group1        v1        private1
group       group1        v2c       private1
rocommunity  private5
rocommunity6 private5
rocommunity  public3
rocommunity6 public3
rocommunity  public4
rocommunity6 public4

###############################################################################
#
# VACM Access
#                  name   context   model   level  prefix       read view    write view  notify view

access      Group1      ""        any  noauth   exact      view1   View2   view3
access      Group2      ""        usm  auth   exact      view4   view5   ""
access      Group3      ""        usm  priv   exact      ""   ""   view6
access      Group4      ""        v1  noauth   exact      view8   ""   view7
access      Group5      ""        v2c  noauth   exact      ""   ""   ""
access      Group6      ""        v2c  noauth   exact      ""   ""   ""

###############################################################################
#
# Notify Table Entries
#
snmpNotifyTable  InformNotify  InformNotify  2  5  1
snmpNotifyTable  TrapNotify    TrapNotify    1  5  1

#
# Target Addr Table Entries
#

targetAddr  1.2.3.4  1.3.6.1.6.1.1  0x0102030400a2   1500   3  trapNotify  1.2.3.4   3   1
targetAddr  2002::10  1.3.6.1.2.1.100.1.2  0x200200000000000000000000000000100834   600   4  informNotify  2002::10   3   1

#
# Target Params Table Entries
#

targetParams  1.2.3.4  0  1  public 1  3  1
targetParams  2002::10  3  3  User1 3  3  1
targetParams  3002::10  1  2  private 1  3  1

###############################################################################
#
# SNMPv3 USM Users
#  username    (MD5|SHA)  authpassphrase  [(DES|AES)  privpassphrase]
#

createUser User1 MD5 -l 0x0123456789abcdef0123456789abcdef AES -l 0x0223456789abcdef0123456789abcdef
createUser User2 SHA -l 0x0323456789abcdef0123456789abcdef AES -l 0x0423456789abcdef0123456789abcdef
createUser User3 SHA -l 0x0523456789abcdef0123456789abcdef DES -l 0x0623456789abcdef0123456789abcdef
createUser User4 MD5 -l 0x0723456789abcdef0123456789abcdef DES -l 0x0123456789abcdef0123456789abcdef
createUser User5 MD5 -l 0x08000000000000000000000000000000 DES -l 0x0123456789abcdef0123456789abcdef
createUser User6
createUser User7 DES -l 0x0923456789abcdef0123456789abcdef
createUser User8 SHA -l 0x0a23456789abcdef0123456789abcdef
createUser User9

###############################################################################
#
# VACM View
#                               name      type                  oid  [mask]
#

view        Default1  	excluded  usmUser
view        Default1  	excluded  1.3.6.1.6.3.16
view        Default1      included  iso
view        Default1      included  1.3.6.1.6.3.20
view        Default2      included  iso
view        Default4  	excluded  iso

###############################################################################
#
# SNMP agent Engine-Id
#

exactEngineID 0x900001370300190f234006

###############################################################################
#
# SNMP agent address
#

agentAddress udp:10.27.7.180:2161%Vrf1
agentAddress udp:10.27.7.180:20161
agentAddress udp6:[2002::2]:161

# End Configuration derived from ConfigDB
